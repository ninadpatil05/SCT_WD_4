<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TaskFlow Pro - Enhanced Task Manager</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#6366f1" />
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="logo">
                <i class="fas fa-tasks"></i>
                <span>TaskFlow Pro</span>
            </div>
            <nav>
                <div class="nav-section">
                    <div class="nav-title">Views</div>
                    <div class="nav-item active" data-view="tasks">
                        <i class="fas fa-list"></i><span>All Tasks</span><span class="ml-auto" id="total-tasks">0</span>
                    </div>
                    <div class="nav-item" data-view="today">
                        <i class="fas fa-calendar-day"></i><span>Today</span><span class="ml-auto" id="today-tasks">0</span>
                    </div>
                    <div class="nav-item" data-view="upcoming">
                        <i class="fas fa-clock"></i><span>Upcoming</span><span class="ml-auto" id="upcoming-tasks">0</span>
                    </div>
                    <div class="nav-item" data-view="completed">
                        <i class="fas fa-check-circle"></i><span>Completed</span><span class="ml-auto" id="completed-tasks">0</span>
                    </div>
                </div>
                <div class="nav-section">
                    <div class="nav-title">Categories</div>
                    <div class="categories-list" id="categories-list">
                        <p class="placeholder">No categories yet.</p>
                    </div>
                    <div class="add-category-btn" id="add-category-btn"><i class="fas fa-plus"></i><span>Add Category</span></div>
                </div>
            </nav>
        </aside>

        <main class="main-content">
            <header class="header">
                <h1 class="header-title" id="page-title">All Tasks</h1>
                <div class="header-actions">
                    <div style="position: relative;">
                        <button class="btn btn-secondary" id="backup-btn"><i class="fas fa-download"></i>Backup</button>
                        <div class="backup-menu" id="backup-menu">
                            <button id="export-btn"><i class="fas fa-download"></i> Export Tasks</button>
                            <label><i class="fas fa-upload"></i> Import Tasks
                                <input type="file" id="import-input" accept=".json" style="display: none" />
                            </label>
                        </div>
                    </div>
                    <button class="btn btn-secondary" id="stats-btn"><i class="fas fa-chart-bar"></i>Stats</button>
                    <button class="btn btn-primary" id="add-task-btn"><i class="fas fa-plus"></i>Add Task</button>
                    <button class="theme-toggle" id="theme-toggle-btn"><i class="fas fa-moon"></i></button>
                </div>
            </header>
            <div class="content">
                <input type="text" class="form-input search-input" id="search-input" placeholder="Search tasks..." />

                <div class="task-list-view active">
                    <div class="view-tabs">
                        <div class="tab active" data-tab="list">
                            <i class="fas fa-list"></i>List View
                        </div>
                        <div class="tab" data-tab="kanban">
                            <i class="fas fa-columns"></i>Kanban View
                        </div>
                        <div class="tab" data-tab="calendar">
                            <i class="fas fa-calendar"></i>Calendar View
                        </div>
                        <div class="tab" data-tab="analytics">
                            <i class="fas fa-chart-pie"></i>Analytics
                        </div>
                    </div>

                    <!-- List View -->
                    <div class="list-container active" id="list-container">
                        <div class="task-filters">
                            <div class="filter-btn active" data-filter="all">All</div>
                            <div class="filter-btn" data-filter="high">High Priority</div>
                            <div class="filter-btn" data-filter="medium">Medium Priority</div>
                            <div class="filter-btn" data-filter="low">Low Priority</div>
                            <div class="filter-btn" data-filter="overdue">Overdue</div>
                            <div class="filter-btn" data-filter="recurring">Recurring</div>
                        </div>
                        <div class="tasks-container" id="tasks-container">
                            <p class="placeholder">No tasks yet. Add one to get started!</p>
                        </div>
                    </div>

                    <!-- Kanban View -->
                    <div class="kanban-container" id="kanban-container" style="display:none;">
                        <div class="kanban-columns">
                            <div class="kanban-column" data-status="todo">
                                <h3>To Do</h3>
                                <div class="kanban-tasks" id="kanban-todo"></div>
                            </div>
                            <div class="kanban-column" data-status="in-progress">
                                <h3>In Progress</h3>
                                <div class="kanban-tasks" id="kanban-in-progress"></div>
                            </div>
                            <div class="kanban-column" data-status="done">
                                <h3>Done</h3>
                                <div class="kanban-tasks" id="kanban-done"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Calendar View -->
                    <div class="calendar-container" id="calendar-container">
                        <div class="calendar-header">
                            <h2 id="calendar-month-year"></h2>
                            <div class="calendar-nav">
                                <button class="btn btn-secondary" id="prev-month-btn"><i class="fas fa-chevron-left"></i></button>
                                <button class="btn btn-secondary" id="next-month-btn"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendar-grid">
                            <p class="placeholder">Calendar view is not available yet.</p>
                        </div>
                    </div>

                    <!-- Analytics View -->
                    <div class="analytics-container" id="analytics-container">
                        <p class="placeholder">Analytics view is not available yet.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Task Modal -->
    <div class="modal-overlay" id="task-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="task-modal-title">Add New Task</h2>
                <button class="modal-close-btn">&times;</button>
            </div>
            <form id="task-form">
                <input type="hidden" id="task-id" />
                <div class="form-group">
                    <label class="form-label" for="task-title">Title *</label>
                    <input type="text" class="form-input" id="task-title" required />
                </div>
                <div class="form-group">
                    <label class="form-label" for="task-description">Description</label>
                    <textarea class="form-textarea" id="task-description"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="task-priority">Priority</label>
                        <select class="form-select" id="task-priority">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="task-category">Category</label>
                        <select class="form-select" id="task-category"></select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="task-due-date">Due Date</label>
                        <input type="date" class="form-input" id="task-due-date" />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="task-due-time">Due Time</label>
                        <input type="time" class="form-input" id="task-due-time" />
                    </div>
                </div>

                <!-- Recurrence -->
                <div class="form-group">
                    <label class="form-label" for="task-recurring">Recurring</label>
                    <select class="form-select" id="task-recurring">
                        <option value="none" selected>None</option>
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>

                <!-- Notes -->
                <div class="form-group">
                    <label class="form-label" for="task-notes">Notes</label>
                    <textarea class="form-textarea" id="task-notes" placeholder="Add detailed notes or attachments info..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label">Subtasks</label>
                    <div class="subtasks-container" id="subtasks-container"></div>
                    <button type="button" class="btn btn-secondary" id="add-subtask-btn"><i class="fas fa-plus"></i>Add Subtask</button>
                </div>

                <!-- Time Tracking -->
                <div class="form-group time-tracking-group" style="display:none;">
                    <label class="form-label">Time Tracking</label>
                    <div id="time-tracking-display">
                        <span id="time-tracked">0m 0s</span>
                        <button type="button" class="btn btn-secondary" id="start-timer-btn">Start</button>
                        <button type="button" class="btn btn-secondary" id="stop-timer-btn" disabled>Stop</button>
                        <button type="button" class="btn btn-secondary" id="reset-timer-btn" disabled>Reset</button>
                    </div>
                </div>

                <div class="form-group" style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <button type="button" class="btn btn-secondary modal-cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i>Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal-overlay" id="category-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Add Category</h2>
                <button class="modal-close-btn">&times;</button>
            </div>
            <form id="category-form">
                <div class="form-group">
                    <label class="form-label" for="category-name">Category Name *</label>
                    <input type="text" class="form-input" id="category-name" required />
                </div>
                <div class="form-group">
                    <label class="form-label">Color</label>
                    <div class="color-picker">
                        <div class="color-option" data-color="#ef4444" style="background-color: #ef4444;"></div>
                        <div class="color-option" data-color="#f59e0b" style="background-color: #f59e0b;"></div>
                        <div class="color-option" data-color="#10b981" style="background-color: #10b981;"></div>
                        <div class="color-option" data-color="#3b82f6" style="background-color: #3b82f6;"></div>
                        <div class="color-option" data-color="#8b5cf6" style="background-color: #8b5cf6;"></div>
                        <div class="color-option" data-color="#ec4899" style="background-color: #ec4899;"></div>
                    </div>
                </div>
                <div class="form-group" style="display: flex; gap: 1rem; justify-content: flex-end;">
                    <button type="button" class="btn btn-secondary modal-cancel-btn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="stats-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Task Statistics</h2>
                <button class="modal-close-btn">&times;</button>
            </div>
            <div class="stats-grid" id="stats-grid-modal">
                <p class="placeholder">Stats are not available yet.</p>
            </div>
        </div>
    </div>

    <!-- Custom Alert / Confirm Modals -->
    <div class="modal-overlay" id="custom-alert-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="custom-alert-title">Notification</h2>
            </div>
            <p id="custom-alert-message"></p>
            <div class="form-group" style="display: flex; justify-content: flex-end; margin-top: 1.5rem;">
                <button type="button" class="btn btn-primary" id="custom-alert-ok">OK</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="custom-confirm-modal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="custom-confirm-title">Confirmation</h2>
            </div>
            <p id="custom-confirm-message"></p>
            <div class="form-group" style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem;">
                <button type="button" class="btn btn-secondary" id="custom-confirm-cancel">Cancel</button>
                <button type="button" class="btn btn-primary" id="custom-confirm-ok">OK</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
